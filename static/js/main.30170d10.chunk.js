(this["webpackJsonpmevo-go"]=this["webpackJsonpmevo-go"]||[]).push([[0],{24:function(e,t,o){},28:function(e,t,o){"use strict";o.r(t);var n=o(5),c=o(1),i=o.n(c),a=o(17),s=o.n(a),l=(o(24),o(10)),r=o(8),u=o(7);function j(){return Object(n.jsx)("nav",{className:"bg-mevo-main",children:Object(n.jsx)("img",{className:"w-auto h-10",src:"https://assets.mevo.co.nz/brand/logo-light.svg",alt:"Mevo Logo"})})}function b(e){var t=e.children;return Object(n.jsx)("div",{className:"h-screen flex flex-col",children:t})}var d={geolocateControl:{style:{top:80,right:0,margin:15},showAccuracyCircle:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{maxZoom:25}},navigationControl:{showCompass:!1,style:{top:0,right:0,margin:15}},layer:{zonesFadeInStyle:{id:"mevoZonesFadeIn",source:"geoDataSource",type:"fill",paint:{"fill-color":"#678191","fill-outline-color":"#f7590d","fill-opacity":.3}},zonesStrokesStyles:{id:"mevoZonesStrokes",source:"geoDataSource",type:"line",paint:{"line-color":"#f7590d","line-width":3}}}};var p=function(){var e=Object(c.useState)({latitude:-41.292757,longitude:174.790984,zoom:12,bearing:0,pitch:0}),t=Object(r.a)(e,2),o=t[0],i=t[1],a=Object(c.useState)([]),s=Object(r.a)(a,2),p=s[0],m=s[1],h=Object(c.useState)(null),O=Object(r.a)(h,2),g=O[0],f=O[1];Object(c.useEffect)((function(){fetch("https://api.mevo.co.nz/public/home-zones/all").then((function(e){return e.json()})).then((function(e){m(Object(n.jsxs)(u.e,{type:"geojson",data:e.data,id:"geoDataSource",children:[Object(n.jsx)(u.b,Object(l.a)({},d.layer.zonesFadeInStyle)),Object(n.jsx)(u.b,Object(l.a)({},d.layer.zonesStrokesStyles))]}))}),(function(e){f(e)}))}),[g]);var v=Object(c.useState)(!1),x=Object(r.a)(v,2),S=x[0],y=x[1],w=Object(c.useState)(null),z=Object(r.a)(w,2),N=z[0],k=z[1],C=Object(c.useState)([]),I=Object(r.a)(C,2),J=I[0],M=I[1],A=Object(c.useState)([]),Z=Object(r.a)(A,2),E=Z[0],W=Z[1];return Object(c.useEffect)((function(){fetch("https://api.mevo.co.nz/public/vehicles/all").then((function(e){return e.json()})).then((function(e){y(!0),M(e)}),(function(e){y(!0),k(e)}))}),[]),Object(c.useMemo)((function(){S&&!N&&W(J.map((function(e){return Object(n.jsx)(u.c,{longitude:Number(e.position.longitude),latitude:Number(e.position.latitude),children:Object(n.jsx)("img",{src:e.iconUrl,alt:"Mevo car position",className:"w-8 h-auto"})},Number(e.position.longitude)+Number(e.position.latitude))})))}),[S,N,J]),Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(b,{children:[Object(n.jsx)(j,{}),Object(n.jsxs)(u.f,{latitude:o.latitude,longitude:o.longitude,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch,minZoom:12,width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/streets-v9",onViewportChange:i,mapboxApiAccessToken:"pk.eyJ1IjoibWl0cmk0NSIsImEiOiJja2tqMjJ3djYwcXdpMnZxa3QydWVsYWh6In0.bS8T8wGM8SJCmouWHcJ1fA",children:[p,E,Object(n.jsx)(u.d,Object(l.a)({},d.navigationControl)),Object(n.jsx)(u.a,Object(l.a)(Object(l.a)({},d.geolocateControl),{},{trackUserLocation:!0}))]})]})})};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(p,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.30170d10.chunk.js.map