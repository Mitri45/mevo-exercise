(this["webpackJsonpmevo-go"]=this["webpackJsonpmevo-go"]||[]).push([[0],{26:function(e,t,o){},29:function(e,t,o){"use strict";o.r(t);var n=o(3),i=o(1),a=o.n(i),c=o(19),s=o.n(c),r=(o(26),o(6)),l=o(9),u=o(8),d=o(12),b={accessToken:"pk.eyJ1IjoibWl0cmk0NSIsImEiOiJja2tqMjJ3djYwcXdpMnZxa3QydWVsYWh6In0.bS8T8wGM8SJCmouWHcJ1fA",mapInitialState:{latitude:-41.292757,longitude:174.790984,zoom:12,bearing:0,pitch:0},geolocateControl:{style:{top:80,right:0,margin:15},showAccuracyCircle:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{maxZoom:15}},navigationControl:{showCompass:!1,style:{top:0,right:0,margin:15}},layer:{zonesFadeInStyle:{id:"mevoZonesFadeIn",source:"geoDataSource",type:"fill",paint:{"fill-color":"#678191","fill-outline-color":"#f7590d","fill-opacity":.3}},zonesStrokesStyles:{id:"mevoZonesStrokes",source:"geoDataSource",type:"line",paint:{"line-color":"#f7590d","line-width":3}}}};function j(e){var t=e.viewport,o=e.setViewport,i=e.markersToRender,a=e.zonesToRender,c=e.setUserPosition,s=e.setLocationEnabled;return Object(n.jsxs)(u.g,Object(r.a)(Object(r.a)({},t),{},{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/streets-v9",onViewStateChange:o,mapboxApiAccessToken:b.accessToken,children:[a,i,Object(n.jsx)(u.e,Object(r.a)({},b.navigationControl)),Object(n.jsx)(u.b,Object(r.a)(Object(r.a)({},b.geolocateControl),{},{trackUserLocation:!0,onViewportChange:function(){o(Object(r.a)(Object(r.a)({},t),{},{zoom:12}))},onGeolocate:function(e){c([e.coords.longitude,e.coords.latitude]),s(!0)}}))]}))}function p(e){var t=e.clickHandler,o=e.text,a=e.locationEnabled,c=Object(i.useState)(!1),s=Object(l.a)(c,2),r=s[0],u=s[1],d="".concat(a?"cursor-pointer":"cursor-not-allowed"," relative inline-block px-6 py-2 text-base font-medium leading-6 text-center text-white uppercase transition shadow ripple hover:shadow-lg hover:bg-blue-800 focus:outline-none");return Object(n.jsxs)("div",{onMouseEnter:function(){return u(!r)},onMouseLeave:function(){return u(!r)},children:[Object(n.jsx)("button",{type:"button",className:d,onClick:t,disabled:!a,children:o}),!a&&r&&Object(n.jsx)("span",{className:"bg-yellow-300 border-r border-opacity-50 border-yellow-600 rounded-md shadow-md text-white w-auto h-auto absolute top-10 right-20 z-10 p-2",children:"GeoLocation should be enabled"})]})}function O(e){var t=e.findNearestCar,o=e.locationEnabled;return Object(n.jsxs)("nav",{className:"bg-mevo-main flex justify-between",children:[Object(n.jsx)("img",{className:"w-auto h-10 flex-grow-0 flex-shrink-0",src:"https://assets.mevo.co.nz/brand/logo-light.svg",alt:"Mevo Logo"}),Object(n.jsx)("div",{className:"flex justify-end flex-grow",children:Object(n.jsx)(p,{text:"Find nearest car",locationEnabled:o,clickHandler:t})})]})}function f(e){var t=e.children;return Object(n.jsx)("div",{className:"h-screen flex flex-col font-body",children:t})}j.defaultProps={setUserPosition:"",zonesToRender:{},markersToRender:[],setLocationEnabled:""},p.defaultProps={isDisabled:!0,locationEnabled:!1},O.defaultProps={locationEnabled:!1};var h=function(){var e=Object(i.useState)(Object(r.a)({},b.mapInitialState)),t=Object(l.a)(e,2),o=t[0],a=t[1],c=Object(i.useCallback)((function(){a(Object(r.a)(Object(r.a)({},o),{},{longitude:174.790984,latitude:-41.292757,zoom:12,transitionInterpolator:new u.a({speed:1.2}),transitionDuration:"auto"}))}),[o]),s=Object(i.useState)([]),p=Object(l.a)(s,2),h=p[0],m=p[1],g=Object(i.useState)(null),x=Object(l.a)(g,2),v=(x[0],x[1]),y=Object(i.useState)(null),w=Object(l.a)(y,2),S=(w[0],w[1]),k=Object(i.useState)([]),N=Object(l.a)(k,2),z=N[0],C=N[1],E=Object(i.useState)([]),I=Object(l.a)(E,2),T=I[0],M=I[1],P=Object(i.useState)([]),J=Object(l.a)(P,2),L=J[0],A=J[1],R=Object(i.useState)(!1),U=Object(l.a)(R,2),D=U[0],V=U[1];return Object(i.useEffect)((function(){fetch("https://api.mevo.co.nz/public/home-zones/all").then((function(e){return e.json()})).then((function(e){m(Object(n.jsxs)(u.f,{type:"geojson",data:e.data,id:"geoDataSource",children:[Object(n.jsx)(u.c,Object(r.a)({},b.layer.zonesFadeInStyle)),Object(n.jsx)(u.c,Object(r.a)({},b.layer.zonesStrokesStyles))]}))}),(function(e){v(e)}))}),[]),Object(i.useEffect)((function(){fetch("https://api.mevo.co.nz/public/vehicles/all").then((function(e){return e.json()})).then((function(e){C(e),M(e.map((function(e){return Object(n.jsx)(u.d,{longitude:Number(e.position.longitude),latitude:Number(e.position.latitude),children:Object(n.jsx)("img",{src:e.iconUrl,alt:"Mevo car position",className:"w-8 h-auto"})},e.position.longitude+e.position.latitude)})))}),(function(e){S(e)}))}),[]),Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(f,{children:[Object(n.jsx)(O,{locationEnabled:D,backToWelly:c,findNearestCar:function(){var e=[];z.map((function(t){return e.push(Object(d.point)([Number(t.position.longitude),Number(t.position.latitude)]))}));var t=Object(d.nearestPoint)(Object(d.point)(L),Object(d.featureCollection)(e)),o=z.find((function(e){return e.position.longitude==t.geometry.coordinates[0]&&e.position.latitude==t.geometry.coordinates[1]}));o&&M([Object(n.jsx)(u.d,{longitude:Number(o.position.longitude),latitude:Number(o.position.latitude),children:Object(n.jsx)("img",{src:o.iconUrl,alt:"Mevo car position",className:"w-10 h-auto"})},o.position.longitude+o.position.latitude)])}}),Object(n.jsx)(j,{viewport:o,setViewport:a,userPosition:L,setUserPosition:A,setLocationEnabled:V,zonesToRender:h,markersToRender:T})]})})};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(h,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.ebb11b54.chunk.js.map